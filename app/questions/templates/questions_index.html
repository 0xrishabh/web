{% comment %}
  Copyright (C) 2020 Gitcoin Core

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published
  by the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program. If not,see
  <http://www.gnu.org/licenses/>.
{% endcomment %}
{% load i18n static add_url_schema avatar_tags %}

<!DOCTYPE html>
<html lang="en">
  <head>
    {% include 'shared/head.html' %}
    {% include 'shared/cards.html' %}
    <link rel="stylesheet" href={% static "v2/css/vue-loader.css" %} />

    <link rel="stylesheet" href="{% static "v2/css/board.css" %}" />

  </head>
  <body class="{{ active }} bg-lightblue g-font-muli" >
    {% include 'shared/top_nav.html' with class='d-md-flex' %}
    {% include 'shared/nav.html' %}
    <div id="questions-board" v-cloak>
      {% csrf_token %}
      <div class="tab-content" id="questions-board">
        <section class="container">
          <div class="row">
            <div class="col-12">
              <div class="bg-white rounded border my-4">
                <div class="p-4 border-bottom font-weight-bold">
                  [[ questions.length ]] Open Question
                  <button class="btn btn-gc-blue btn-sm float-right" v-on:click="ask">Ask a Question</button>
                </div>
                <ul class="list-unstyled list-bounty">
                  <li v-for="(question, index) in questions.questions" class="position-relative font-smaller-1 mt-3 p-3 list-bounty-item">
                    <div class="d-flex flex-column flex-lg-row justify-content-between border p-3 my-2 ml-5 rounded">
                      <div class="list-bounty-item_content my-auto">
                        <div class="d-flex flex-column flex-md-row">
                          <div class="d-flex flex-column w-100 ml-md-3">
                            <div class="mr-2 d-inline-block">
                              <img style="max-width:50px" v-bind:src="'/dynamic/avatar/' + question.owner.handle">
                              <a v-bind:href="'/' + question.owner.handle">
                                <span>[[ question.owner.handle ]]</span>
                              </a>
                              <hr/>
                            </div>
                            <a :href="question.absolute_url" title="View question details" class="text-truncate mb-2 text-dark">[[ question.text ]]</a>
                            <div v-if="question.tip" class="d-flex flex-column flex-md-row justify-content-between font-smaller-2">
                              <span class="my-1">[[ question.tip.amount ]] ETH</span>
                              <button class="btn btn-gc-blue btn-sm btm-block" v-on:click="answer(question.id)" :data-questionid=question.id>Answer</button>
                            </div>
                            <div v-else class="d-flex flex-column flex-md-row justify-content-between font-smaller-2">
                              <button class="btn btn-gc-blue btn-sm btm-block" v-on:click="attachTip(question.id)" :data-questionid=question.id>Attach Funds</button>
                            </div>
                            <ul class="list-unstyled">
                              <li v-for="(answer, index) in question.answers" class="position-relative font-smaller-1 mt-3 p-3">
                                <hr/>
                                <img style="max-width:50px" v-bind:src="'/dynamic/avatar/' + question.owner.handle">
                                <a v-bind:href="'/' + answer.owner.handle">
                                  <span>@[[ answer.owner.handle ]]</span>
                                </a>
                                <div class="mr-2 d-inline-block">
                                  [[ answer.text ]]
                                </div>
                                <button class="btn btn-gc-blue btn-sm btm-block float-right" v-on:click="selectAnswer(answer.id)">Select Answer & Tip</button>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </li>
                </ul>
                <loading-screen v-if="isLoading.open"></loading-screen>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
    {% include 'shared/footer.html' %}
    {% include 'shared/footer_scripts_lite.html' %}
    {% include 'shared/analytics.html' %}
    {% include 'shared/footer_scripts.html'%}
    <script src="{% static "v2/js/vue-components.js" %}"></script>
    <script src="{% static "v2/js/lib/ipfs-api.js" %}"></script>
    <script src="{% static "v2/js/ipfs.js" %}"></script>
    <script src="{% static "v2/js/lib/secrets.min.js" %}"></script>
    <script src="{% static "v2/js/ethereumjs-accounts.js" %}"></script>
    <script src="/dynamic/js/tokens_dynamic.js"></script>
    <script src="{% static "v2/js/tokens.js" %}"></script>
    <script src="{% static "onepager/js/send.js" %}"></script>
    <script src="{% static "v2/js/questions.js" %}"></script>
    <script>
      $('body').bootstrapTooltip({
        selector: '[data-toggle="tooltip"]'
      });
    </script>

  </body>
</html>
