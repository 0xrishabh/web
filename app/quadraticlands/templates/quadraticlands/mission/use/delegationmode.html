{% extends 'quadraticlands/components/base.html' %}
{% load humanize static i18n %}


{% block 'content' %}

<!-- hide footer, header as this is a fullscreen experience -->
{% include 'quadraticlands/components/fullscreen.html' %}

<section class="quest">

  <!-- select delegation mode -->
  <main>

    <div class="wrapper">

      <div class="quest-delegationmode glass">

        <div class="delegation-toggle">
          <div class="label">Delegation Mode</div>
          <div id="mode_toggle" data-mode="enabled" class="toggle enabled" data-kinetics-attraction
            data-kinetics-attraction-chance=".5" data-kinetics-attraction-force="1.6" data-kinetics-attraction-grow="1">
            <div class="enabled">Enabled</div>
            <div class="circle"></div>
            <div class="disabled">Disabled</div>
          </div>
        </div>

        <p id="explain_text">I prefer to delegate my voting power to a Gitcoin Steward, so that I can earn a reward
          passively. You can always change this setting in your dashboard settings.</p>

      </div>

    </div>

  </main>


  <!-- timer / seperator -->
  <div class="seperator">
  </div>

  <!-- bottom navigation -->
  <nav class="glass">

    <div class="left">
      <a href="/quadraticlands/" data-kinetics-attraction data-kinetics-attraction-chance=".3"
        data-kinetics-attraction-force="1" data-kinetics-attraction-size="200">Exit</a>
    </div>

    <div class="center">
      Proof of Use
    </div>

    <!-- button status -->
    <div class="right">

      <!-- intro - start voting process -->
      <div>
        <a id="btn_continue" class="btn" data-kinetics-attraction data-kinetics-attraction-chance=".3"
          data-kinetics-attraction-force="1" data-kinetics-attraction-size="200">Continue</a>
      </div>

    </div>

  </nav>
</section>

{% endblock %}

{% block 'scripts' %}

<!-- kinetics particles -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.kinetics = new Kinetics({
      particles: {
        count: 8, sizes: { min: 100, max: 200 }, rotate: { speed: 0.2 }, toColor: "#6F3FF5",
        mode: { type: "linear", boundery: "endless", speed: "1" }
      }
    })
    window.kinetics.interactionHook();
  });
</script>

<!-- force web3modal to popup automatically when no provider selected-->
<script src="{% static " v2/quadraticlands/js/forceWallet.js" %}"></script>


<script>
  document.addEventListener("DOMContentLoaded", function () {

    updateInterface("enabled")

    const mode_toggle = document.getElementById("mode_toggle")

    mode_toggle.addEventListener("click", () => {

      mode = mode_toggle.getAttribute("data-mode")

      if (mode == "disabled") {
        mode_toggle.setAttribute("data-mode", "enabled");
        mode_toggle.classList.remove("disabled")
        mode_toggle.classList.add("enabled")
        updateInterface("enabled")
        window.kinetics.set({ particles: { toColor: "#6F3FF5" } });
      }

      else {
        mode_toggle.setAttribute("data-mode", "disabled");
        mode_toggle.classList.remove("enabled")
        mode_toggle.classList.add("disabled")
        updateInterface("disabled")
        window.kinetics.set({ particles: { toColor: "#02E2AC" } });
      }

      console.debug('mode: ', mode)

    });

  });


  /*********** VIEWS */
  function updateInterface(status) {

    const explain_text = document.getElementById("explain_text")
    const btn_continue = document.getElementById("btn_continue")

    // ENABLED
    if (status == "enabled") {
      explain_text.innerHTML = "I prefer to delegate my voting power to a Gitcoin Steward, so that I can earn a reward passively. You can always change this setting in your dashboard settings."
      btn_continue.href = "/quadraticlands/mission/use/delegate"
      console.debug("INTERFACE:ENABLED")
    }

    // DISABLED
    if (status == "disabled") {
      explain_text.innerHTML = "I want to use my voting power to actively participate in Gitcoinâ€™s governance and only earn a reward through my active participation. You can always change this setting in your dashboard settings."
      btn_continue.href = "/quadraticlands/mission/use/vote"
      console.debug("INTERFACE:ENABLED")
    }

  }

</script>

{% endblock %}