{% extends 'quadraticlands/components/base.html' %}
{% load humanize static i18n %}

{% block 'content' %}

<!--PROOF OF KNOWLEDGE -->

<section class="grid">
	
	<figure>
		<img src="/static/quadraticlands/images/proof-of-receive-start.svg">
	</figure>

	<div>
		<h3><span>#</span>Chapter 2 of 3</h3>
		<h1>Proof of receive</h1>
		<p id="receiveMessage">Please connect to your Wallet in the top right corner!</p>

		<span id="receiveAdress" class="receiveadress hide" ></span>
	
	
		<a id="buttonContinue" href="/quadraticlands/mission/receive/claim" class="btn hide">Continue</a>
	</div>

</section>


{% endblock %}


{% block 'scripts' %}

	<script src="/static/quadraticlands/js/particles.js"></script>
	<script src="/static/quadraticlands/js/sal_init.js"></script>
	<script src="/static/quadraticlands/js/app.js"></script>

	<script>

		// make sure user definitly have selected a provider.
		// and if so update the interface to show the
		// next button, a message, and the eth-adress

		const receiveMessage = document.getElementById("receiveMessage");
		const receiveAdress = document.getElementById("receiveAdress");
		const buttonContinue = document.getElementById("buttonContinue");
	

		window.addEventListener("dataWalletReady", () => {
			receiveMessage.innerHTML = "You will be rewarded with GTC Tokens to";
			receiveAdress.classList.remove("hide");
			receiveAdress.innerHTML = selectedAccount;
			buttonContinue.classList.remove("hide");				
		});

		// reset the view when there is no Wallet
		// it would be better to check something like
		// dataWalletReady = false ... but i can not find a function for this
		// so i trigger this on the buttonDisconnect in my interface for now

		const buttonDisconnect = document.getElementById("btn-disconnect");

		buttonDisconnect.addEventListener("click", () => {
			receiveMessage.innerHTML = "Please connect to your Wallet in the top right corner!";
			receiveAdress.classList.add("hide");
			buttonContinue.classList.add("hide");
		});	



	</script>


{% endblock %}


