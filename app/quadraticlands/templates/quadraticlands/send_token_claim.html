{% extends 'onepager/base.html' %}
{% comment %}
Copyright (C) 2020 Gitcoin Core

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see
<http: //www.gnu.org/licenses />.
{% endcomment %}
{% load i18n static %}
{% block 'scripts' %}
{% include 'shared/current_profile.html' %}
<script src="{% static "v2/js/lib/ipfs-api.js" %}"></script>
<script src="{% static "v2/js/ipfs.js" %}"></script>
<script src="{% static "v2/js/tokens.js" %}"></script>
<script src="{% static "v2/js/abi.js" %}"></script>
<script src="{% static "v2/js/amounts.js" %}"></script>
<script src="{% static "v2/js/lib/secrets.min.js" %}"></script>
<script src="{% static "v2/js/ethereumjs-accounts.js" %}"></script>
<script src="/dynamic/js/tokens_dynamic.js"></script>
<script src="{% static "onepager/js/send.js" %}"></script>
<script src="{% static "onepager/js/confetti.js" %}"></script>
<script src="{% static "v2/js/user-search.js" %}"></script>
<script src="{% static "v2/js/tooltip_hover.js" %}"></script>
{% endblock %}
<!-- Main -->
{% block 'main' %}
<link rel="stylesheet" type="text/css" href="{% static "v2/css/tooltip_hover.css" %}">
<style>
    #ethinfo-tooltip {
        top: 19.5rem;
        left: 25rem;
        max-width: 80%;
        z-index: 10000;
    }

    @media only screen and (max-width: 1050px) {
        #ethinfo-tooltip {
            top: 21rem;
            left: 3.5rem;
        }
    }

    .send2 .navbar-network {
        padding: 3px;
    }

    .pb-1 {
        padding-bottom: 1rem;
    }

    #fromName,
    #advanced_toggle,
    .to_name .select2-container,
    .terms {
        margin-top: 0.75rem;
    }
</style>
<div>
    <canvas id="world" style="position:fixed; top:0px; left: 0px;"></canvas>
</div>
<section id="main">
    <header>
        <span class="avatar">
            <a href="{% url "tip" %}">
                <img src="{% static "v2/images/helmet.png" %}"
                    style="background-color: white; max-width: 100px; max-height: 100px;" alt="Helmet" />
            </a>
        </span>
    </header>

    <div id="send_eth">
        <h1>{% trans "Claim GTC Tokens" %}</h1>
        <div>

            <p>user_id: {{ user_id }}</p>
            <p>user_amount: {{ user_amount }}</p>
            <p>user_address: {{ user_address }}</p>
            <p>msg_hash_hex: {{ msg_hash_hex }}</p>
            <p>eth_signed_message_hash_hex: {{ eth_signed_message_hash_hex }}</p>
            <p>eth_signed_signature_hex: {{ eth_signed_signature_hex }}</p>
            <p>{{defaultGasPrice}}</p>
            
            <div class="terms pb-1">
                <input type="checkbox" id="tos" value="1">
                <label for="tos">{% blocktrans %}I understand &amp; agree to the <a
                        href="https://gitcoin.co/terms">terms of service</a>.{% endblocktrans %}</label>
            </div>
            <a href="#" id="send" class="button button--primary">{% trans "Enter the Quadratic Lands!" %} <span
                    class="emoji">⚡️</span></a>
            <br>
        </div>
        <div id="send_eth_done" style="display:none;">
            <h1>{% trans "Woo hoo!" %}</h1>
            <h2>{% blocktrans %}Your <span id="tokenName">ETH</span> has been sent <a href="" target="_blank"
                    rel="noopener noreferrer" id="trans_link">to the blockchain</a>.{% endblocktrans %}</h2>
            <p id="loading_trans">
                <a href="" target="_blank" rel="noopener noreferrer"
                    id="trans_link2">{% trans "The transaction is still pending." %}</a><br>{% trans "This page will auto-update when the transaction is confirmed" %}
                <br>({% trans "but you can close the browser window if you want" %}).
                <br>
                <img src="{% static "onepager/images/loading_v2.gif" %}" style="max-width: 70px; max-height: 70px;"
                    alt="Loading ...">
            </p>
            <hr>
            <h1>{% blocktrans %}<span id="new_username"></span> has been notified{% endblocktrans %}</h1>
            <h3>{% trans "with instructions about how to receive their tip." %}</h1>
                <br>
                <a id="" class="button button--primary" href="{% url "send_tip" %}">⬅ {% trans "Start Over" %}</a>
        </div>
        <div id="ethinfo-tooltip" class="tooltip-hover g-text-left">
            <span id="heading">{% trans "Where is my Eth Going?" %}</span><br>
            <span id="subheading">{% trans "Your funds are safe!" %}</span><br><br>
            <span id="hovertext"><strong class="g-bold">{% trans "Unverified Users" %}</strong>
                <em>{% trans "(no eth address associated)" %}</em><br>
                {% trans "A secure proxy address will hold the funds until the recipient claims them. This address is generated by gitcoin’s website, but we don't have its private keys, and the only person who can access the funds is the recipient." %}<br><br>
                <strong class="g-bold">{% trans "Verified Users" %}</strong><br>
                {% trans "We send the funds directly to the address associated with the user." %}</span>
        </div>
</section>

{% comment "ZW removing this as I don't think it's needed" %}
<script>
    document.fundRequest = {
        amount: "{{ fund_request.amount }}",
        token_name: "{{ fund_request.token_name }}",
        network: "{{ fund_request.network }}"
    };
</script>
{% endcomment %}

{% if not user_json and username %}
<script>
    setTimeout(function () {
        _alert("Sorry, we can't find the user");
    }, 1000);
</script>
{% endif %}

<script>
{% if fund_request %}
document.default_token = '{{fund_request.token_name}}';
{% else %}
document.default_token = 'ETH';
{% endif %}
</script>

{% endblock %}