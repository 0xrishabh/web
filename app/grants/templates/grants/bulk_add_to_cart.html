{% load i18n static humanize grants_extra %}

{% for grant in grants %}
  <form class="js-addDetailToCart-form">
    <input type="hidden" id="grant_id" name="grant_id" value="{{ grant.id }}">
    <input type="hidden" id="grant_slug" name="grant_slug" value="{{ grant.slug }}">
    <input type="hidden" id="grant_title" name="grant_title" value="{{ grant.title }}">
    <input type="hidden" id="grant_contract_version" name="grant_contract_version" value="{{ grant.contract_version }}">
    <input type="hidden" id="grant_contract_address" name="grant_contract_address" value="{{ grant.contract_address }}">
    <input type="hidden" id="grant_token_symbol" name="grant_token_symbol" value="{{ grant.grant.token_symbol }}">
    <input type="hidden" id="grant_admin_address" name="grant_admin_address" value="{{ grant.admin_address }}">
    <input type="hidden" id="grant_token_address" name="grant_token_address" value="{{ grant.token_address }}">
    <input type="hidden" id="grant_logo" name="grant_logo" value="{% if grant.logo and grant.logo.url %}{{ grant.logo.url }}{% else %}{% with grant_logo='v2/images/grants/logos/' id=grant.id|modulo:3 %} {% static grant_logo|addstr:id|add:'.png' %} {% endwith %} {% endif %}">
    <input type="hidden" id="grant_image_css" name="grant_image_css" value="{{ grant.image_css }}">
    <input type="hidden" id="grant_clr_prediction_curve" name="grant_clr_prediction_curve" value="{{ grant.clr_prediction_curve }}">
  </form>
{% endfor %}

    {% include 'shared/footer_scripts.html' %}
  <script src="{% static "v2/js/grants/funding.js" %}"></script>
  <script src="/dynamic/js/tokens_dynamic.js"></script>
  <script src="{% static "v2/js/tokens.js" %}"></script>

<script>
$(document).ready(function() {

    $('.js-addDetailToCart-form').each(function() {

        const formData = objectifySerialized($(this).serializeArray());
        CartData.addToCart(formData);
    });
    setTimeout(function(){
        document.location.href = "/grants/cart";
    }, 50);
});
</script>
