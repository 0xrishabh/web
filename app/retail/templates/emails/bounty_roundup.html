{% extends 'emails/template.html' %}
{% comment %}
  Copyright (C) 2018 Gitcoin Core

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published
  by the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program. If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% load i18n static humanize avatar_tags kudos_extras %}
{% block content %}
<style>
  .roundup {
    padding-top: 0.5em;
    padding-bottom: 0.5em;
    padding-left: 2em;
    padding-right: 2em;
    line-height: 20px;
  }
  p, li, a{
    color: #353535;
    line-height: 26px;
    font-size: 16px;
    list-style: none;
  }
  .intro li{
    margin-bottom: 15px;
  }
  h1{
    color: black;
    font-weight: bold;
  }
  h3{
    color: #0d0860;
    font-weight: bold;
  }
  h5{
    color: #aeaeae;
  }
  a{
    text-decoration: underline;
  }
  table {
    border-spacing: 0;
    border-collapse: collapse;
    vertical-align: top;
    text-align: left;
    width: 100%;
    padding: 0;
  }
  table tr {
    vertical-align: top;
    padding: 0;
  }
  table tr th {
    color: #444;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight: normal;
    line-height: 1.4;
    font-size: 16px;
    margin: 0;
    padding: 0;
  }
  table.email-sponsorship {
    position: relative;
    display: table;
  }
  table.email-sponsorship th.columns {
    width: 584px;
    margin: 0 auto;
    padding: 0 16px 16px;
  }
</style>

<div class="roundup">
  <div>
    <h1>{% trans "The Gitcoin Weekly" %}</h1>
  </div>

  <div class='intro text-left'>
    {{ intro|safe }}
    <div style="text-align: center; ">
      <a href="https://twitter.com/owocki">
        <img style="max-height: 170px; " src="{% static "v2/images/avatar.png" %}">
      </a>
      <p>
        <a href="https://twitter.com/owocki">@owocki</a>
      </p>
    </div>
    <hr>
  </div>

  {% if sponsor %}
    <table class="email-sponsorship row" style="">
      <tbody>
          <tr style="" align="left">
            <th class="small-12 large-12 columns first last" align="left">
              <table>
                <tr align="left">
                  <th align="left">
                    <table class="spacer">
                      <tbody>
                        <tr align="left">
                          <td height="20px" style='font-size: 20px; line-height: 20px; word-wrap: break-word; -webkit-hyphens: auto; -ms-hyphens: auto; hyphens: auto; border-collapse: collapse !important; mso-line-height-rule: exactly; color: #444; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; margin: 0; padding: 0;' align="left" valign="top">&nbsp;</td>
                        </tr>
                      </tbody>
                    </table>

                    <p class="sponsor text-center" style='color: #757575; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: 500; line-height: 1.4; font-size: 12px; -ms-word-break: normal; word-break: normal; -webkit-hyphens: manual; -ms-hyphens: manual; hyphens: manual; text-transform: uppercase; letter-spacing: 1px; margin: 0 0 10px; padding: 0;' align="center">Sponsored by <a href="#LINK"
                    style='color: #3a8bbb; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; text-align: left; line-height: 1.4; text-decoration: none; margin: 0; padding: 0;'>
                    Elk</a></p>

                    <table class="spacer">
                    <tbody>
                        <tr style="" align="left">
                          <td height="2px" style=
                          'font-size: 2px; line-height: 2px; word-wrap: break-word; -webkit-hyphens: auto; -ms-hyphens: auto; hyphens: auto; border-collapse: collapse !important; mso-line-height-rule: exactly; color: #444; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; margin: 0; padding: 0;'
                          align="left" valign="top">&nbsp;</td>
                        </tr>
                      </tbody>
                    </table>

                    <table class="row" style=
                    "border-spacing: 0; border-collapse: collapse; vertical-align: top; text-align: left; width: 100%; position: relative; display: table; padding: 0;">
                    <tbody>
                        <tr style="" align="left">
                          <th class="small-4 large-4 columns first" style=
                          'width: 184px; color: #444; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; line-height: 1.4; font-size: 16px; margin: 0 auto; padding: 0 0 16px;'
                          align="left">
                            <table>
                            <tr style="" align="left">
                                <th style=
                                'color: #444; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; line-height: 1.4; font-size: 16px; margin: 0; padding: 0;'
                                align="left"><a href="#LINK"
                                style='color: #3a8bbb; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; text-align: left; line-height: 1.4; text-decoration: none; margin: 0; padding: 0;'>
                                <img alt="[TITLE]" src="https://cdn.dribbble.com/uploads/932/original/1ca5e417289b00ce268306cebc81074a.png?1552080018"
                                style=
                                "outline: none; text-decoration: none; -ms-interpolation-mode: bicubic; width: auto; max-width: 100%; clear: both; display: block; border: none;" /></a></th>
                              </tra
                            </table>
                          </th>

                          <th class="small-1 large-1 columns" style=
                          'width: 34px; color: #444; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; line-height: 1.4; font-size: 16px; margin: 0 auto; padding: 0 0 16px;'
                          align="left">
                            <table>
                            <tr style="" align="left">
                                <th style=
                                'color: #444; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; line-height: 1.4; font-size: 16px; margin: 0; padding: 0;'
                                align="left"></th>
                              </tr>
                            </table>
                          </th>

                          <th class="small-7 large-7 columns last" style=
                          'width: 334px; color: #444; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; line-height: 1.4; font-size: 16px; margin: 0 auto; padding: 0 0 16px;'
                          align="left">
                            <table>
                            <tr style="" align="left">
                                <th style=
                                'color: #444; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; line-height: 1.4; font-size: 16px; margin: 0; padding: 0;'
                                align="left">
                                  <h5 style=
                                  'color: inherit; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1.4; word-wrap: normal; font-size: 20px; margin: 0 0 10px; padding: 0;'
                                  align="left"><a href=
                                  "#LINK"
                                  style=
                                  'color: #3a8bbb; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; text-align: left; line-height: 1.4; text-decoration: none; margin: 0; padding: 0;'>[TITLE]</a></h5>

                                  <div class="sponsor-copy" style=
                                  "line-height: 1.5; font-size: 15px;">
                                    <p style=
                                    'color: #444; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; line-height: 1.4; font-size: 16px; -ms-word-break: normal; word-break: normal; -webkit-hyphens: manual; -ms-hyphens: manual; hyphens: manual; margin: 0 0 10px; padding: 0;'
                                    align="left">asdf</p>
                                  </div>
                                </th>
                              </tr>
                            </table>
                          </th>
                        </tr>
                      </tbody>
                    </table>

                    <p class="sponsorship-cta text-center" style=
                    'color: #bbb; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; line-height: 1.4; font-size: 11px; -ms-word-break: normal; word-break: normal; -webkit-hyphens: manual; -ms-hyphens: manual; hyphens: manual; margin: 10px 0 10px; padding: 0;'
                    align="center">Interested in sponsoring The Gitcoin Weekly? <a class=
                    "text-underline" href=
                    "#email-to-codefund"
                    style=
                    'text-decoration: underline; color: #bbb; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal; text-align: left; line-height: 1.4; margin: 0; padding: 0;'>
                    Let us know</a></p>
                  </th>
                </tr>
              </table>
            </th>
          </tr>
        </tbody>
      </table>
    <hr/>
  {% endif %}

  {% if highlights %}
    <h3>{% trans "Last Week's Highlights" %}</h3>
    <h5>{% trans "Community Members growing open source" %}</h5>

    <div style="text-align: center;">
      {% for highlight in highlights %}
        <li style="list-style:none; margin-bottom: 5px;">
          {% if highlight.who_link %}
            <img style="border-radius: 20px;" src="{% avatar_url highlight.who%}" width=30px height=30px>
            <a style="font-weight: bold; text-decoration: none;" href="{% url "profile" highlight.who %}">{{ highlight.who }}</a>
          {% else %}
            * <strong>{{ highlight.who }}</strong>
          {% endif %}
            - {{ highlight.what }}
          {% if highlight.link %}
            <a href="{{ highlight.link }}">{{ highlight.link_copy }}</a>
          {% endif %}
        </li>
      {% endfor %}
    </div>
    <br>
    <br>
    <hr>
  {% endif %}

  <div>
    <h3>{% trans "Open Funded Issues" %}</h3>
    <h5>{% trans "Grow Open Source &amp; Make Some ETH" %}</h5>
  </div>

  {% for bounty in bounties %}
    {% include 'emails/bounty.html' with bounty=bounty.obj small=1 primer=bounty.primer %}
  {% endfor %}

  <div class="centered-contents">
    <p>{% trans "Don't see anything that strikes your fancy above?" %}</p>
    <p>{% trans "There are more issues in the Gitcoin Issue Explorer:" %}</p>

    <div style="margin-bottom: 2em;">
      <a class="button" href="{% url "explorer" %}">{% trans "View Issue Explorer" %}</a>
    </div>
  </div>
  <hr>
  {% if leaderboard %}
    <h3>{% trans "Who's leading the Leaderboard?" %}</h3>
    <h5>{% trans "See the top Gitcoin Network Members For the last 90 Days" %}</h5>

    <div class="text-left">
      {% for key, package in leaderboard.items %}
        <div style="width: 30%; display: inline-block; min-width: 250px;">
          <h4>{{ package.title }}</h4>
          <ul>
            {% for leaderboard_item in package.items %}
            <li style="list-style:none; margin-bottom: 5px;">
              {{ leaderboard_item.rank }}. <img style="border-radius: 20px;" src="{% avatar_url leaderboard_item.profile %}" width=30px height=30px>
              <a style="font-weight: bold; text-decoration: none;" href="{% url "profile" leaderboard_item.github_username %}">{{ leaderboard_item.github_username }}</a> : ${{ leaderboard_item.amount|floatformat:2 }}
            </li>
          {% endfor %}
          </ul>
        </div>
      {% endfor %}
    </div>
    <br>
    <br>
    <div style="margin-bottom: 2em;">
      <a class="button" href="{% url "leaderboard" 'quarterly_payers' %}">{% trans "View Leaderboard" %}</a>
    </div>
    <hr>
  {% endif %}
  <hr>

  {% if kudos_highlights %}
    <h3>{% trans "Kudos" %}</h3>
    <h5>{% trans "Recognition throughout the platform" %}</h5>
    <div style="text-align: center;">
      <ul style="text-align: center; padding-left: 20px;">
        {% for kudos in kudos_highlights %}
        {% if kudos.recipient_profile and kudos.sender_profile %}
          <li style="list-style:none; margin: 5px; padding: 15px 30px; min-height: 310px; display: inline-block; float:left; border: 1px solid #cccccc; border-radius: 5px; width: 220px;">
              <a style="font-weight: bold; text-decoration: none;" href="{% url "profile" kudos.recipient_profile.handle %}">{{ kudos.recipient_profile.handle }}</a> received <strong>{{ kudos.kudos_token_cloned_from.name|humanize_name }}</strong> from <a style="font-weight: bold; text-decoration: none;" href="{% url 'profile' kudos.sender_profile.handle %}">{{ kudos.sender_profile.handle }}</a><br>
            <a href="{% url 'kudos_details' kudos.kudos_token_cloned_from.pk kudos.kudos_token_cloned_from.name  %}">

              <img style="max-width: 120px;" src="{{ kudos.kudos_token_cloned_from.img_url }}"></a>

            {% if kudos.comments_public %}
              <br>
              <i>
                Comment: {{ kudos.comments_public }}
              </i>
            {% endif %}
          </li>
        {% endif %}
        {% endfor %}
      </ul>
      <br style="clear: both;">
    </div>
    <br>
    <br>
    <hr>
  {% endif %}
  <hr>
</div>
<p>
  {% trans "You are receiving this email because your email address is on the notification list." %} <a href="{% url "email_settings" subscriber.priv %}">{% trans "Manage Email Settings" %}</a>.
</p>
{% endblock %}
